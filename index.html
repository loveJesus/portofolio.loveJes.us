<!doctype html>
<!-- For God so loved the world that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life. John 3:16 -->
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>L.J. Love Jesus / Brian Cowan - Portfolio</title>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
            integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <style>
            /* Basic Reset & Defaults */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                scroll-behavior: smooth;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    Helvetica, Arial, sans-serif;
                line-height: 1.6;
                color: #333;
                background-color: #f9f9f9;
                overflow-x: hidden;
            }

            .container_chirho {
                max-width: 1100px;
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Navigation */
            nav {
                background-color: #333;
                color: #fff;
                padding: 1rem 0;
                position: fixed;
                top: 0;
                width: 100%;
                z-index: 1000;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            }

            nav .container_chirho {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            nav .logo_chirho {
                font-size: 1.5rem;
                font-weight: bold;
                color: #fff;
                text-decoration: none;
            }

            nav ul {
                list-style: none;
                display: flex;
            }

            nav ul li {
                margin-left: 20px;
            }

            nav ul li a {
                color: #fff;
                text-decoration: none;
                font-weight: bold;
                transition: color 0.3s ease;
            }

            nav ul li a:hover {
                color: #00aaff;
            }

            /* Hero Section */
            #hero_chirho {
                background-color: #222;
                color: #fff;
                height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                padding-top: 60px;
                position: relative;
                overflow: hidden;
            }

            #hero-content_chirho {
                position: relative;
                z-index: 1;
            }

            #hero_chirho h1 {
                font-size: 3rem;
                margin-bottom: 0.5rem;
            }

            #hero_chirho p {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            #hero_chirho .cta-button_chirho {
                display: inline-block;
                background-color: #00aaff;
                color: #fff;
                padding: 12px 25px;
                border-radius: 5px;
                text-decoration: none;
                font-weight: bold;
                transition: background-color 0.3s ease;
            }

            #hero_chirho .cta-button_chirho:hover {
                background-color: #0088cc;
            }

            /* Canvas for Three.js */
            #bg-canvas_chirho {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 0;
            }

            /* Section Styling */
            section:not(#hero_chirho) {
                padding: 80px 0;
                border-bottom: 1px solid #ddd;
                background-color: #f9f9f9;
                position: relative;
                z-index: 1;
            }
            section:last-of-type {
                border-bottom: none;
            }

            section h2 {
                text-align: center;
                font-size: 2.5rem;
                margin-bottom: 40px;
                color: #333;
            }

            /* About Section */
            #about_chirho p {
                max-width: 800px;
                margin: 0 auto;
                text-align: center;
                font-size: 1.1rem;
            }

            /* Skills Section */
            #skills_chirho .skills-grid_chirho {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
                margin-top: 20px;
            }

            #skills_chirho .skill-category_chirho {
                background-color: #fff;
                padding: 25px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            #skills_chirho .skill-category_chirho h3 {
                font-size: 1.4rem;
                color: #00aaff;
                margin-bottom: 15px;
                border-bottom: 2px solid #eee;
                padding-bottom: 5px;
            }
            #skills_chirho .skill-category_chirho h3 i {
                margin-right: 8px;
            }

            #skills_chirho ul {
                list-style: none;
            }
            #skills_chirho li {
                margin-bottom: 8px;
                font-size: 1rem;
            }
            #skills_chirho li::before {
                content: "â€¢";
                color: #00aaff;
                font-weight: bold;
                display: inline-block;
                width: 1em;
                margin-left: -1em;
            }

            /* Projects Section */
            #projects_chirho .projects-grid_chirho {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }

            #projects_chirho .project-card_chirho {
                background-color: #fff;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                transition: transform 0.3s ease;
                display: flex;
                flex-direction: column;
            }
            #projects_chirho .project-card_chirho:hover {
                transform: translateY(-5px);
            }
            #projects_chirho .project-card_chirho img {
                width: 100%;
                height: 180px;
                object-fit: cover;
                display: block;
            }
            #projects_chirho .project-content_chirho {
                padding: 20px;
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            #projects_chirho h3 {
                font-size: 1.2rem;
                margin-bottom: 10px;
                color: #333;
            }
            #projects_chirho p {
                font-size: 0.95rem;
                margin-bottom: 10px;
            }
            #projects_chirho .tech-stack_chirho {
                font-size: 0.85rem;
                color: #555;
                font-style: italic;
                margin-bottom: 10px;
            }
            #projects_chirho .project-links_chirho {
                margin-top: auto;
            }
            #projects_chirho .project-links_chirho a {
                display: inline-block;
                margin-right: 10px;
                text-decoration: none;
                color: #00aaff;
                font-weight: bold;
                border: 1px solid #00aaff;
                padding: 5px 10px;
                border-radius: 4px;
                transition:
                    background-color 0.3s ease,
                    color 0.3s ease;
                font-size: 0.9rem;
            }
            #projects_chirho .project-links_chirho a:hover {
                background-color: #00aaff;
                color: #fff;
            }
            #projects_chirho .project-links_chirho a i {
                margin-right: 5px;
            }

            /* Services Section - UPDATED GRID */
            #services_chirho {
                background-color: #fff;
            }
            #services_chirho .services-grid_chirho {
                display: grid;
                /* Default to 2 columns */
                grid-template-columns: repeat(2, 1fr);
                gap: 30px;
            }
            #services_chirho .service-category_chirho {
                background-color: #f9f9f9;
                padding: 25px;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            }
            #services_chirho .service-category_chirho h3 {
                font-size: 1.5rem;
                color: #333;
                margin-bottom: 20px;
                border-bottom: 2px solid #00aaff;
                padding-bottom: 8px;
            }
            #services_chirho .service-category_chirho h3 i {
                margin-right: 8px; /* Add space for icons */
            }
            #services_chirho .service-item_chirho {
                margin-bottom: 15px;
                padding-bottom: 15px;
                border-bottom: 1px dashed #ccc;
            }
            #services_chirho .service-item_chirho:last-child {
                border-bottom: none;
                margin-bottom: 0;
                padding-bottom: 0;
            }
            #services_chirho .service-item_chirho h4 {
                font-size: 1.1rem;
                margin-bottom: 5px;
                color: #555;
            }
            #services_chirho .service-item_chirho p {
                font-size: 0.95rem;
                margin-bottom: 8px;
            }
            #services_chirho .service-item_chirho .price_chirho {
                font-weight: bold;
                color: #00aaff;
                font-size: 1rem;
            }
            #services_chirho .services-notes_chirho {
                margin-top: 30px;
                padding: 20px;
                background-color: #e9e9e9;
                border-radius: 8px;
                font-size: 0.9rem;
                text-align: center;
                /* Span across grid columns if needed */
                grid-column: 1 / -1; /* Make notes span full width */
            }

            /* Contact Section */
            #contact_chirho {
                background-color: #e9e9e9;
            }
            #contact_chirho p {
                text-align: center;
                font-size: 1.1rem;
                margin-bottom: 20px;
            }
            #contact_chirho .contact-info_chirho {
                text-align: center;
                margin-bottom: 30px;
            }
            #contact_chirho .contact-info_chirho a,
            #contact_chirho .contact-info_chirho span {
                color: #00aaff;
                text-decoration: none;
                font-weight: bold;
                font-size: 1.2rem;
                display: block;
                margin-bottom: 10px;
            }
            #contact_chirho .contact-info_chirho a:hover {
                text-decoration: underline;
            }
            #contact_chirho .contact-info_chirho a i,
            #contact_chirho .contact-info_chirho span i {
                margin-right: 8px;
            }
            #contact_chirho .contact-info_chirho p i {
                margin-right: 8px;
            }
            #contact_chirho .social-links_chirho {
                text-align: center;
            }
            #contact_chirho .social-links_chirho a {
                margin: 0 15px;
                text-decoration: none;
                font-size: 2rem;
                color: #333;
                transition: color 0.3s ease;
            }
            #contact_chirho .social-links_chirho a:hover {
                color: #00aaff;
            }

            /* Footer */
            footer {
                background-color: #333;
                color: #fff;
                text-align: center;
                padding: 20px 0;
                margin-top: 0;
                position: relative;
                z-index: 1;
            }
            footer .copyright-link_chirho {
                color: #fff;
                text-decoration: none;
                font-weight: bold;
            }
            footer .copyright-link_chirho:hover {
                text-decoration: underline;
            }

            /* Responsive Design */
            @media (max-width: 992px) {
                /* Medium screens */
                #skills_chirho .skills-grid_chirho,
                #projects_chirho .projects-grid_chirho {
                    grid-template-columns: repeat(2, 1fr);
                }
                /* Services grid remains 2 columns */
                #services_chirho .services-grid_chirho {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            @media (max-width: 768px) {
                /* Small screens */
                h1 {
                    font-size: 2.5rem;
                }
                #hero_chirho p {
                    font-size: 1.2rem;
                }
                section h2 {
                    font-size: 2rem;
                }
                nav .container_chirho {
                    flex-direction: column;
                }
                nav ul {
                    margin-top: 10px;
                }
                nav ul li {
                    margin: 0 10px;
                }
                #skills_chirho .skills-grid_chirho,
                #projects_chirho .projects-grid_chirho,
                #services_chirho .services-grid_chirho {
                    /* Make all grids 1 column */
                    grid-template-columns: 1fr;
                }
            }
            p#about_me_chirho {
                text-align: justify;
            }
            /* About Section Enhanced Layout and Effect Styles */
            #about_chirho .container_chirho {
                display: flex; /* Use flexbox for layout */
                flex-wrap: wrap; /* Allow wrapping on smaller screens */
                gap: 30px; /* Space between text and effect */
                align-items: center; /* Vertically align items in the flex container */
            }

            .about-text-chirho {
                flex: 2; /* Text takes up more space (approx 2/3) */
                min-width: 300px; /* Ensure text block doesn't get too narrow */
            }

            #about_me_chirho {
                text-align: justify; /* Keep the justified text */
                margin-bottom: 0; /* Remove default bottom margin if not needed */
            }

            .about-effect-container-chirho {
                flex: 1; /* Effect takes up less space (approx 1/3) */
                display: flex;
                justify-content: center; /* Center the effect horizontally */
                align-items: center; /* Center the effect vertically */
                min-height: 150px; /* Give the container some height */
                position: relative; /* Needed for absolute positioning of the heart */
            }

            .cross-heart-wrapper-chirho {
                position: relative; /* Container for positioning heart over cross */
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .latin-cross-chirho {
                font-size: 11rem; /* Size of the cross */
                color: #555; /* Color of the cross */
                line-height: 1; /* Adjust line height for better positioning */
                text-shadow: 0 0 2px rgba(0, 0, 0, 0.6);
            }

            .pulsing-heart-chirho {
                font-size: 5.5rem; /* Size of the heart */
                color: #ff4d6d; /* A heart color */
                position: absolute; /* Position over the cross */
                top: 15%; /* Adjust vertical position relative to wrapper */
                left: 50%; /* Center horizontally relative to wrapper */
                transform: translateX(
                    -50%
                ); /* Fine-tune horizontal centering */
                animation: pulseHeartChirho 1.5s infinite ease-in-out;
                text-shadow: 0 0 8px rgba(0, 0, 0, 0.4); /* Optional subtle shadow */
            }

            /* Pulsing Animation */
            @keyframes pulseHeartChirho {
                0% {
                    transform: translateX(-50%) scale(0.95);
                    opacity: 0.8;
                }
                50% {
                    transform: translateX(-50%) scale(1.05);
                    opacity: 1;
                }
                100% {
                    transform: translateX(-50%) scale(0.95);
                    opacity: 0.8;
                }
            }

            /* Responsive: Stack below on smaller screens */
            @media (max-width: 768px) {
                #about_chirho .container_chirho {
                    flex-direction: column; /* Stack elements vertically */
                    align-items: center; /* Center items when stacked */
                }

                .about-text-chirho {
                    flex-basis: 100%; /* Text takes full width */
                    text-align: center; /* Center heading */
                }
                #about_me_chirho {
                    text-align: justify; /* Keep paragraph justified */
                    margin-bottom: 30px; /* Add space below text */
                }

                .about-effect-container-chirho {
                    flex-basis: 100%; /* Effect takes full width */
                    min-height: 120px; /* Adjust height if needed */
                }
                /* Optional: Adjust icon sizes for mobile if needed */
                .latin-cross-chirho {
                    /* font-size: 4rem; */
                }
                .pulsing-heart-chirho {
                    /* font-size: 2rem; */
                    top: 22%; /* Re-adjust vertical position for smaller cross */
                }
            }
        </style>
    </head>
    <body>
        <nav>
            <div class="container_chirho">
                <a href="#hero_chirho" class="logo_chirho">Love Jesus / LJ</a>
                <ul>
                    <li><a href="#about_chirho">About</a></li>
                    <li><a href="#skills_chirho">Skills</a></li>
                    <li><a href="#projects_chirho">Projects</a></li>
                    <li><a href="#services_chirho">Services</a></li>
                    <li><a href="#contact_chirho">Contact</a></li>
                </ul>
            </div>
        </nav>

        <section id="hero_chirho">
            <canvas id="bg-canvas_chirho"></canvas>
            <div id="hero-content_chirho">
                <h1>L.J. / Love Jesus</h1>
                <h4>(Brian Cowan)</h4>
                <p>
                    Senior Software Engineer | Full-Stack Developer | AI & Cloud
                    Solutions
                </p>
                <p>Based in Fort Myers, Florida</p>
                <a href="#contact_chirho" class="cta-button_chirho"
                    >Get In Touch</a
                >
            </div>
        </section>

        <section id="about_chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <div class="about-text-chirho">
                    <h2>About Me</h2>
                    <p id="about_me_chirho">
                        Hi, I'm L.J. short for Love Jesus, there is a story
                        behind that. By God's grace I've been an experienced and
                        versatile software engineer currently based in Florida.
                        I'm passionate about building robust, efficient, and
                        secure applications that solve real-world problems. With
                        a strong foundation in backend systems (Python/Django,
                        Rust, Ruby on Rails and Elixir/Phoenix) i've worked on
                        AI integration, cloud architecture (AWS, Google Cloud),
                        and DevOps practices I enjoy tackling complex technical
                        challenges. My background includes modernizing
                        large-scale systems for major corporations, 3d video
                        game engine creation, working towards robust security,
                        developing innovative AI solutions, creating mobile
                        applications, and building websites, tools and ecommerce
                        solutions for various organizations. I'm seeking
                        challenging freelance or contract opportunities where I
                        can leverage my skills locally or remotely to serve
                        others and to be a part of bringing the good news of
                        Jesus Christ to the nations.
                    </p>
                </div>

                <div class="about-effect-container-chirho">
                    <div class="cross-heart-wrapper-chirho">
                        <i class="fas fa-cross latin-cross-chirho"></i>
                        <i class="fas fa-heart pulsing-heart-chirho"></i>
                    </div>
                </div>
            </div>
        </section>
        <style>
            /* === Global HR Styles (Chirho Suffix Applied) === */
            hr {
                /* Target ALL hr elements */
                border: none;
                height: 30px;
                /* Use a CSS variable for the gradient, JS will update this */
                /* Default color set here, JS overrides when visible */
                --hr-dynamic-color-chirho: linear-gradient(
                    to right,
                    transparent,
                    #ccc,
                    transparent
                );
                background: var(--hr-dynamic-color-chirho);
                width: 0%; /* Start hidden */
                max-width: 80%; /* Or adjust as needed */
                margin: 40px auto;
                opacity: 0;
                /* Animate width and opacity changes */
                transition:
                    width 1.5s ease-out,
                    opacity 1s ease-out;
                /* Note: Background color transition is handled dynamically via JS update */
            }

            /* Class added by JS when hr is visible (Chirho Suffix Applied) */
            hr.is-visible-chirho {
                width: 80%; /* Expand width */
                opacity: 1; /* Become visible */
            }

            /* === LinkedIn Promo Section Styles - Updated (Chirho Suffix Applied) === */
            #linkedin-promo-chirho {
                background-color: #e9e9e9;
                padding: 25px 0;
                overflow: hidden; /* Added to contain floats if flex fails somehow */
            }

            #linkedin-promo-chirho .container_chirho {
                max-width: 950px;
                margin: 0 auto;
                padding: 0 20px;
                display: flex;
                /* Ensure items stay on one line on larger screens */
                flex-wrap: nowrap;
                /* Space between items */
                justify-content: space-between;
                /* Center items vertically */
                align-items: center;
                /* Gap between items */
                gap: 25px;
            }

            /* Button styles - order: 1 makes it appear first (left) */
            .linkedin-button-chirho {
                order: 1; /* Explicitly first */
                flex-shrink: 0; /* Prevent button from shrinking */
                /* Other button styles remain the same */
                display: inline-block;
                background-color: #0077b5;
                color: #fff;
                padding: 10px 20px;
                border-radius: 5px;
                text-decoration: none;
                font-weight: bold;
                transition: background-color 0.3s ease;
                font-size: 0.95rem;
                white-space: nowrap;
            }
            .linkedin-button-chirho:hover {
                background-color: #005582;
            }
            .linkedin-button-chirho i {
                margin-right: 8px;
            }

            /* Text styles - order: 2 makes it appear second (right) */
            #linkedin-promo-chirho .promo-text-chirho {
                order: 2; /* Explicitly second */
                flex-grow: 1; /* Allow text to take up remaining space */
                flex-shrink: 1; /* Allow text to shrink if needed, but button won't */
                min-width: 100px; /* Prevent text from becoming too small */
                /* Other text styles remain the same */
                font-size: 1.05rem;
                color: #333;
                margin: 0;
                text-align: left;
            }

            /* Responsive: Allow wrapping only on smaller screens */
            @media (max-width: 700px) {
                /* Adjust breakpoint as needed */
                #linkedin-promo-chirho .container_chirho {
                    flex-wrap: wrap; /* Allow wrapping */
                    justify-content: center;
                    gap: 15px;
                }
                /* On wrap, button goes below text */
                .linkedin-button-chirho {
                    order: 2; /* Button second */
                }
                #linkedin-promo-chirho .promo-text-chirho {
                    order: 1; /* Text first */
                    text-align: center;
                    flex-basis: 100%; /* Takes full width */
                    flex-grow: 0; /* Reset grow */
                    margin-bottom: 15px; /* Add space below text */
                }
            }
        </style>

        <section id="linkedin-promo-chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <a
                    href="https://linkedin.com/in/loveJesus"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="linkedin-button-chirho"
                >
                    <i class="fab fa-linkedin"></i> View on LinkedIn
                </a>
                <p class="promo-text-chirho">
                    For a deeper dive into my 20+ years of experience and
                    project history, please visit my LinkedIn profile.
                </p>
            </div>
        </section>

        <style>
            /* === Section Styling Updates === */
            /* Remove the original border from sections that will get the animated line */
            section:not(#hero_chirho) {
                /* border-bottom: 1px solid #ddd; */ /* REMOVED */
                padding: 80px 0;
                background-color: #f9f9f9; /* Keep other styles */
                position: relative; /* Needed for absolute positioning of ::after */
                overflow: hidden; /* Prevent pseudo-element overflow issues */
            }
            section:last-of-type {
                /* border-bottom: none; */ /* No border needed */
            }
            /* Special case for linkedin promo if using different padding */
            #linkedin-promo-chirho {
                /* border-bottom: none; */ /* REMOVED border */
                position: relative;
                overflow: hidden;
            }

            /* === Animated Separator Line using Pseudo-element (Chirho Suffix Applied) === */
            /* Add the class 'animated-separator-chirho' to sections needing the line below */
            section.animated-separator-chirho::after {
                content: "";
                position: absolute;
                bottom: 0; /* Position at the bottom of the section */
                left: 50%; /* Start animation from center */
                transform: translateX(-50%);
                height: 3px; /* Thickness */
                /* Use the CSS variable for the gradient */
                --hr-dynamic-color-chirho: linear-gradient(
                    to right,
                    transparent,
                    #34a,
                    transparent
                ); /* Default */
                background: var(--hr-dynamic-color-chirho);
                width: 0%; /* Start hidden */
                max-width: 80%; /* Max width */
                opacity: 0;
                /* Transition for width and opacity */
                transition:
                    width 2.5s ease-out,
                    opacity 2s ease-out;
            }

            /* State when the SECTION is visible (add 'is-visible-chirho' class to section via JS) */
            section.animated-separator-chirho.is-visible-chirho::after {
                width: 80%; /* Animate pseudo-element width */
                opacity: 1; /* Animate pseudo-element opacity */
            }

            /* === LinkedIn Promo Section Styles - Unchanged Layout === */
            #linkedin-promo-chirho {
                background-color: #e9e9e9;
                padding: 25px 0;
            }
            #linkedin-promo-chirho .container_chirho {
                max-width: 950px;
                margin: 0 auto;
                padding: 0 20px;
                display: flex;
                flex-wrap: nowrap;
                justify-content: space-between;
                align-items: center;
                gap: 25px;
            }
            .linkedin-button-chirho {
                order: 1;
                flex-shrink: 0;
                display: inline-block;
                background-color: #0077b5;
                color: #fff;
                padding: 10px 20px;
                border-radius: 5px;
                text-decoration: none;
                font-weight: bold;
                transition: background-color 0.3s ease;
                font-size: 0.95rem;
                white-space: nowrap;
            }
            .linkedin-button-chirho:hover {
                background-color: #005582;
            }
            .linkedin-button-chirho i {
                margin-right: 8px;
            }
            #linkedin-promo-chirho .promo-text-chirho {
                order: 2;
                flex-grow: 1;
                flex-shrink: 1;
                min-width: 100px;
                font-size: 1.05rem;
                color: #333;
                margin: 0;
                text-align: left;
            }
            @media (max-width: 700px) {
                #linkedin-promo-chirho .container_chirho {
                    flex-wrap: wrap;
                    justify-content: center;
                    gap: 15px;
                }
                .linkedin-button-chirho {
                    order: 2;
                }
                #linkedin-promo-chirho .promo-text-chirho {
                    order: 1;
                    text-align: center;
                    flex-basis: 100%;
                    flex-grow: 0;
                    margin-bottom: 15px;
                }
            }
        </style>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                // Select the SECTIONS with the class
                const animatedSectionsChirho = document.querySelectorAll(
                    "section.animated-separator-chirho",
                );
                // Set to keep track of sections whose separators are currently visible/active
                const visibleSectionsChirho = new Set();

                // --- Part 1: Intersection Observer for Section Visibility ---
                const visibilityObserverOptionsChirho = {
                    root: null,
                    rootMargin: "0px",
                    threshold: 0.1, // Trigger when 10% of the SECTION is visible
                };

                // Callback function for the visibility observer
                const visibilityCallbackChirho = (entries, observer) => {
                    entries.forEach((entry) => {
                        const sectionElement = entry.target;
                        if (entry.isIntersecting) {
                            // Section is entering the viewport
                            sectionElement.classList.add("is-visible-chirho");
                            visibleSectionsChirho.add(sectionElement); // Track section
                            // Update color immediately when visible based on current position
                            updateSingleSeparatorColorChirho(sectionElement);
                        } else {
                            // Section is leaving the viewport
                            sectionElement.classList.remove(
                                "is-visible-chirho",
                            );
                            visibleSectionsChirho.delete(sectionElement); // Stop tracking
                            // Reset color (to grey) using the custom property on the section when it leaves view
                            // Important: Use a distinct default gradient string here
                            sectionElement.style.setProperty(
                                "--hr-dynamic-color-chirho",
                                "linear-gradient(to right, transparent, #ccc, transparent)",
                            );
                        }
                    });
                };

                // Create and start the visibility observer
                const visibilityObserverChirho = new IntersectionObserver(
                    visibilityCallbackChirho,
                    visibilityObserverOptionsChirho,
                );
                animatedSectionsChirho.forEach((section) =>
                    visibilityObserverChirho.observe(section),
                );

                // --- Part 2: Scroll Listener Function for Dynamic Color ---
                // This function updates the --hr-dynamic-color-chirho property on the SECTION
                const updateSingleSeparatorColorChirho = (sectionElement) => {
                    const viewportHeightChirho = window.innerHeight;
                    // Define the scroll range (bottom of viewport up to 75% mark)
                    const colorChangeStartChirho = viewportHeightChirho; // Bottom edge of viewport
                    const colorChangeEndChirho = viewportHeightChirho * 0.25; // 75% up from bottom (25% from top)

                    const rectChirho = sectionElement.getBoundingClientRect();
                    // Use the bottom edge of the section (where the ::after pseudo-element is)
                    const separatorTopChirho = rectChirho.bottom;

                    let factorChirho = 0; // Interpolation factor (0 = bottom/grey, 1 = top/blue)

                    // Calculate factor based on position within the active range
                    if (
                        separatorTopChirho < colorChangeStartChirho &&
                        separatorTopChirho > colorChangeEndChirho
                    ) {
                        // Linear mapping: as separatorTopChirho decreases (moves up), factor increases towards 1
                        factorChirho =
                            1 -
                            (separatorTopChirho - colorChangeEndChirho) /
                                (colorChangeStartChirho - colorChangeEndChirho);
                    } else if (separatorTopChirho <= colorChangeEndChirho) {
                        // If separator is above the 75% mark, it's fully blue (factor = 1)
                        factorChirho = 1;
                    } else {
                        // If separator is below the range (at the very bottom), factor is 0 (fully grey)
                        factorChirho = 0;
                    }
                    // Clamp factor just in case
                    factorChirho = Math.max(0, Math.min(1, factorChirho));

                    // *** REVERSED Color Interpolation ***
                    // Interpolate between Blue (#00aaff -> 0, 170, 255) and Grey (#ccc -> 204, 204, 204)
                    // factor = 1 means fully blue, factor = 0 means fully grey.
                    const greyValChirho = 204;
                    const blueRChirho = 0;
                    const blueGChirho = 170;
                    const blueBChirho = 255;

                    // When factor is 1, we want blue. When factor is 0, we want grey.
                    const currentRChirho = Math.round(
                        greyValChirho +
                            (blueRChirho - greyValChirho) * factorChirho,
                    );
                    const currentGChirho = Math.round(
                        greyValChirho +
                            (blueGChirho - greyValChirho) * factorChirho,
                    );
                    const currentBChirho = Math.round(
                        greyValChirho +
                            (blueBChirho - greyValChirho) * factorChirho,
                    );

                    const centerColorChirho = `rgb(${currentRChirho}, ${currentGChirho}, ${currentBChirho})`;
                    const newGradientChirho = `linear-gradient(to right, transparent, ${centerColorChirho}, transparent)`;

                    // Update the CSS custom property ON THE SECTION ELEMENT
                    window.requestAnimationFrame(() => {
                        sectionElement.style.setProperty(
                            "--hr-dynamic-color-chirho",
                            newGradientChirho,
                        );
                    });
                    // console.log(`Section Bottom: ${separatorTopChirho.toFixed(0)}, Factor: ${factorChirho.toFixed(2)}, Color: ${centerColorChirho}`); // Debugging
                };

                // Function to update colors for all currently visible section separators
                const updateAllVisibleSeparatorColorsChirho = () => {
                    // Create a temporary array from the Set to avoid modifying while iterating if needed
                    const sectionsToUpdate = Array.from(visibleSectionsChirho);
                    sectionsToUpdate.forEach((section) => {
                        // Check if the element is still in the DOM (optional safety check)
                        if (document.body.contains(section)) {
                            updateSingleSeparatorColorChirho(section);
                        }
                    });
                };

                // Attach the listener to the scroll event
                window.addEventListener(
                    "scroll",
                    updateAllVisibleSeparatorColorsChirho,
                    { passive: true },
                );

                // Initial call to set colors for any sections already visible on load
                // Ensure the DOM is fully ready AND styles potentially computed
                requestAnimationFrame(() => {
                    animatedSectionsChirho.forEach((section) => {
                        // Check if section is already intersecting on load
                        const rect = section.getBoundingClientRect();
                        if (rect.top < window.innerHeight && rect.bottom > 0) {
                            if (!visibleSectionsChirho.has(section)) {
                                // Add if not already added by observer race condition
                                section.classList.add("is-visible-chirho");
                                visibleSectionsChirho.add(section);
                            }
                            updateSingleSeparatorColorChirho(section);
                        }
                    });
                });
            }); // End DOMContentLoaded
        </script>

        <section id="projects_chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <h2>Featured Projects</h2>
                <div class="projects-grid_chirho">
                    <div class="project-card_chirho">
                        <img
                            src="http://lj-chirho.loveJes.us/panel1_chirho.png.jpg"
                            alt="Backend Modernization & AI Systems"
                        />
                        <div class="project-content_chirho">
                            <h3>Backend Modernization & AI Systems</h3>
                            <p>
                                Led modernization (PHP to multi-tenant Rust and
                                Django) of a core system for thousands of
                                companies. Developed AI document verification,
                                translation, real-time support agents, and
                                generative media features.
                            </p>
                            <p class="tech-stack_chirho">
                                Python, Django, Rust, AI/ML, Swift, Kotlin,
                                MariaDB Galera
                            </p>
                            <div class="project-links_chirho">
                                <a
                                    href="https://safety-record.com"
                                    target="_blank"
                                    ><i class="fas fa-info-circle"></i>
                                    Safety-Record</a
                                >
                            </div>
                        </div>
                    </div>
                    <div class="project-card_chirho">
                        <img
                            src="http://lj-chirho.loveJes.us/panel2_chirho.png.jpg"
                            alt="Ministry & Non-Profit Development"
                        />
                        <div class="project-content_chirho">
                            <h3>Ministry & Non-Profit Development</h3>
                            <p>
                                Developed sites and tools for ministries like
                                ImpactoMinistry (Django), Open Orphanage
                                (WordPress plugins), plus Elixir/Phoenix chat
                                apps for 24/7 Worship Altars.
                            </p>
                            <p class="tech-stack_chirho">
                                Rust, Swift UI, MySQL, Django, Wagtail, Elixir,
                                Phoenix, WordPress
                            </p>
                            <div class="project-links_chirho">
                                <a
                                    href="https://impactoministry.com"
                                    target="_blank"
                                    ><i class="fas fa-external-link-alt"></i>
                                    Impacto Ministry</a
                                >
                                <!-- <a
                                    href="https://openorphanage.org"
                                    target="_blank"
                                    ><i class="fas fa-external-link-alt"></i>
                                    OpenO</a
                                > -->
                            </div>
                        </div>
                    </div>
                    <div class="project-card_chirho">
                        <img
                            src="http://lj-chirho.loveJes.us/panel3_chirho.png.jpg"
                            alt="Mobile Backends & E-commerce"
                        />
                        <div class="project-content_chirho">
                            <h3>Mobile Backends & E-commerce</h3>
                            <p>
                                Built backends for mobile apps including
                                Memorattic on Google App Engine, Glist donation
                                app on Rails/MySQL with Geolocation, and worked
                                on image analysis and generation related to
                                Covet Fashion (HTML5 Canvas, DLang, C, OpenCV,
                                AWS).
                            </p>
                            <p class="tech-stack_chirho">
                                Ruby on Rails, Google App Engine, Python, DLang,
                                NodeJS, C, AWS (S3, Lambda, ECS), MySQL
                            </p>
                            <div class="project-links_chirho">
                                <a
                                    href="https://covetfashion.com"
                                    target="_blank"
                                    ><i class="fas fa-external-link-alt"></i>
                                    Covet Fashion</a
                                >
                            </div>
                        </div>
                    </div>
                    <div class="project-card_chirho">
                        <img
                            src="http://lj-chirho.loveJes.us/panel4_chirho.png.jpg"
                            alt="3D, Games & Open Source"
                        />
                        <div class="project-content_chirho">
                            <h3>3D, Games & Open Source</h3>
                            <p>
                                Created Unity3D animation studio and multiplayer
                                HTML5 projects, 3d Game engines, 3D animations
                                (Blender and Python), realtime shadow tutorials,
                                live shaders, and open-source contributions like
                                Unity3D softbody physics and metaball code and
                                worked on OBS plugins.
                            </p>
                            <p class="tech-stack_chirho">
                                Unity3D, C#, HTML5, Blender, Python, Shaders
                                (WebGL/OpenGL), OBS Studio
                            </p>
                            <div class="project-links_chirho">
                                <!-- <a
                                    href="https://www.shadertoy.com/user/loveJesus"
                                    target="_blank"
                                    ><i class="fas fa-external-link-alt"></i>
                                    Shader Toy</a
                                > -->
                                <a
                                    href="https://youtu.be/Tsq42u2osFM?si=9UqNlzX5rO-922Fo"
                                    target="_blank"
                                    ><i class="fas fa-external-link-alt"></i>
                                    YouTube video</a
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="skills_chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <h2>Technical Skills</h2>
                <div class="skills-grid_chirho">
                    <div class="skill-category_chirho">
                        <h3>
                            <i class="fas fa-code"></i> Languages & Frameworks
                        </h3>
                        <ul>
                            <li>Python (Django, Flask)</li>
                            <li>Rust</li>
                            <li>Ruby on Rails</li>
                            <li>Elixir/Phoenix</li>
                            <li>C# (Unity3D)</li>
                            <li>JavaScript (Node.js), Php</li>
                            <li>Swift, Kotlin (Mobile)</li>
                            <li>Java, C, Assembly, OCaml, Shell</li>
                        </ul>
                    </div>
                    <div class="skill-category_chirho">
                        <h3><i class="fas fa-cloud"></i> Cloud &amp; DevOps</h3>
                        <ul>
                            <li>AWS (EC2, ECS, S3, Lambda)</li>
                            <li>Google App Engine</li>
                            <li>Cloudflare (API/Workers)</li>
                            <li>Docker, KVM, BHyve, OBS Studio</li>
                            <li>Jenkins, CI/CD</li>
                            <li>Server Admin (OpenBSD, Linux)</li>
                            <li>Networking (Bind, PowerDNS)</li>
                        </ul>
                    </div>
                    <div class="skill-category_chirho">
                        <h3>
                            <i class="fas fa-database"></i> Databases &amp;
                            Storage
                        </h3>
                        <ul>
                            <li>MariaDB Galera</li>
                            <li>PostgreSQL</li>
                            <li>SQLite</li>
                            <li>Redis</li>
                            <li>Couchbase</li>
                            <li>SQL Server</li>
                        </ul>
                    </div>
                    <div class="skill-category_chirho">
                        <h3>
                            <i class="fas fa-brain"></i>
                            <i
                                class="fas fa-cubes"
                                style="margin-left: 5px"
                            ></i>
                            AI, Media, Graphics & Tools
                        </h3>
                        <ul>
                            <li>AI Document Verification</li>
                            <li>Realtime AI Agents</li>
                            <li>Generative Media Integration</li>
                            <li>Security (OWASP)</li>
                            <li>
                                Ableton live, Max, Premiere, Final Cut, After
                                Effects
                            </li>
                            <li>Unity3D, C#</li>
                            <li>Blender3D, 3D Animation</li>
                            <li>WebGL/OpenGL Shaders</li>
                            <li>Git, Grafana, WordPress</li>
                            <li>Stripe/PayPal Integration</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="services_chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <h2>Offered Services</h2>
                <div class="services-grid_chirho">
                    <div class="service-category_chirho">
                        <h3>
                            <i class="fas fa-laptop-code"></i> Website & App
                            Help
                        </h3>
                        <div class="service-item_chirho">
                            <h4>Website Building/Fixing</h4>
                            <p>
                                Assisting with creating or repairing websites,
                                including WordPress with WooCommerce, and
                                others.
                            </p>
                            <p class="price_chirho">Starting: $35-50/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Simple Mobile App Development</h4>
                            <p>
                                Creating basic applications for Android and
                                iPhone.
                            </p>
                            <p class="price_chirho">Starting: $30-55/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Ministry/Small Business Tech Consulting</h4>
                            <p>
                                Providing guidance and support for online
                                technology needs.
                            </p>
                            <p class="price_chirho">Starting: $30-60/hr</p>
                        </div>
                    </div>

                    <div class="service-category_chirho">
                        <h3>
                            <i class="fas fa-tools"></i> Computer & Tech Support
                        </h3>
                        <div class="service-item_chirho">
                            <h4>General Computer Help</h4>
                            <p>Troubleshooting common computer issues.</p>
                            <p class="price_chirho">Starting: $30-45/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>System Setup & Security</h4>
                            <p>
                                Assistance with setting up computer systems and
                                basic security configurations.
                            </p>
                            <p class="price_chirho">Starting: $30-65/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Computer Repair Assistance</h4>
                            <p>
                                Help with diagnosing and potentially fixing
                                computer hardware or software problems.
                            </p>
                            <p class="price_chirho">Starting: $30-55/hr</p>
                        </div>
                    </div>

                    <div class="service-category_chirho">
                        <h3>
                            <i class="fas fa-photo-video"></i> Digital Media &
                            Learning
                        </h3>
                        <div class="service-item_chirho">
                            <h4>3D Graphics/Animation</h4>
                            <p>
                                Creating realtime or intermediate pre-rendered
                                3D visuals or animations, e.g., for
                                presentations.
                            </p>
                            <p class="price_chirho">Starting: $40/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Sound Production (Intermediate)</h4>
                            <p>
                                Audio recording, editing, or basic production
                                assistance (e.g., podcasts, simple music using
                                Ableton Live).
                            </p>
                            <p class="price_chirho">Starting: $25-45/hr</p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Tech Tutoring</h4>
                            <p>
                                Teaching computer basics, programming, software
                                use (WordPress, etc.), or introductory tech
                                concepts.
                            </p>
                            <p class="price_chirho">Starting: $25-40/hr</p>
                        </div>
                    </div>

                    <div class="service-category_chirho">
                        <h3>
                            <i class="fas fa-cogs"></i> Advanced Technical
                            Services
                        </h3>
                        <div class="service-item_chirho">
                            <h4>Custom Software Development</h4>
                            <p>
                                Building specific software solutions based on
                                requirements (Python, Rust, Web technologies,
                                etc.).
                            </p>
                            <p class="price_chirho">
                                Starting: $50-80+/hr (project scope dependent)
                            </p>
                        </div>
                        <div class="service-item_chirho">
                            <h4>Cloud & Security Management</h4>
                            <p>
                                Assisting with cloud services (AWS, etc.) and
                                online security practices.
                            </p>
                            <p class="price_chirho">Starting: $30-75/hr</p>
                        </div>
                    </div>
                    <div class="services-notes_chirho">
                        <p>
                            <strong>Note:</strong> Starting rates are flexible
                            and can be adjusted based on project complexity,
                            duration, or relationship (e.g., for fellow church
                            members or ministries). Flat rates for projects can
                            also be discussed. Services available via Zoom. A
                            $25+ travel fee will apply for locations over 25
                            minutes away.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact_chirho" class="animated-separator-chirho">
            <div class="container_chirho">
                <h2>Contact Me</h2>
                <p>
                    Interested in working together or have a question? Feel free
                    to reach out!
                </p>
                <div class="contact-info_chirho">
                    <a href="mailto:lovejesus@lovejes.us"
                        ><i class="fas fa-envelope"></i> lovejesus@lovejes.us</a
                    >
                    <span><i class="fas fa-phone"></i> +1 239 848 1119</span>
                    <p>
                        <i class="fas fa-map-marker-alt"></i> Location: Fort
                        Myers, Florida, United States
                    </p>
                </div>
                <div class="social-links_chirho">
                    <a
                        href="https://www.linkedin.com/in/loveJesus"
                        target="_blank"
                        aria-label="LinkedIn"
                        ><i class="fab fa-linkedin"></i
                    ></a>
                    <a
                        href="https://github.com/loveJesus"
                        target="_blank"
                        aria-label="GitHub"
                        ><i class="fab fa-github"></i
                    ></a>
                </div>
            </div>
        </section>

        <footer>
            <div class="container_chirho">
                <p>
                    <a
                        href="https://www.jesusfilm.org/"
                        target="_blank"
                        class="copyright-link_chirho"
                        aria-label="Jesus Film Project"
                        >Â©</a
                    >
                    2025 L.J. (Brian Cowan). All rights reserved.
                </p>
                <p>
                    Jesus Christ is Lord of Lords and King of Kings, and He is
                    the only way to God the Father.
                </p>
            </div>
        </footer>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

        <script>
            // John 3:16 "For God so loved the world, that he gave his only Son,
            // that whoever believes in him should not perish but have eternal life."

            // --- Shader Definitions ---
            // Vertex Shader for Raw WebGL2 (Simple Quad)
            const rawVertexShaderSource_chirho = `#version 300 es
                    in vec2 a_position; // Expect vec2 input
                    void main() {
                        gl_Position = vec4(a_position, 0.0, 1.0);
                    }
                `;

            // Updated Fragment Shader for Raw WebGL2 (Raymarching Scene)
            const rawFragmentShaderSource_chirho = `#version 300 es
                        precision highp float; // High precision needed

                        uniform vec2 u_resolution_chirho; // Use convention
                        uniform float u_time_chirho;       // Use convention
                        // uniform vec2 u_mouse_chirho;    // Use convention if mouse is added

                        out vec4 fragColor_chirho; // Use convention

                        // --- Common Utilities ---
                        #define PI_CHIRHO 3.14159265359
                        #define MAX_STEPS_CHIRHO 100
                        #define MAX_DIST_CHIRHO 100.0
                        #define SURF_DIST_CHIRHO 0.001

                        // --- Constants ---
                        const int NUM_CROSSES_CHIRHO = 5;
                        const int NUM_SMALL_SPHERES_CHIRHO = 8;

                        // --- Rotation Matrices ---
                        mat3 rotateYChirho(float a_chirho) { float s_chirho=sin(a_chirho),c_chirho=cos(a_chirho); return mat3(c_chirho,0,-s_chirho,0,1,0,s_chirho,0,c_chirho); }
                        mat3 rotateXChirho(float a_chirho) { float s_chirho=sin(a_chirho),c_chirho=cos(a_chirho); return mat3(1,0,0,0,c_chirho,s_chirho,0,-s_chirho,c_chirho); }
                        mat3 rotateZChirho(float a_chirho) { float s_chirho=sin(a_chirho),c_chirho=cos(a_chirho); return mat3(c_chirho,s_chirho,0,-s_chirho,c_chirho,0,0,0,1); }

                        // --- Signed Distance Functions (SDFs) ---
                        float sdSphereChirho(vec3 p_chirho, float r_chirho) { return length(p_chirho) - r_chirho; }

                        float sdBoxChirho( vec3 p_chirho, vec3 b_chirho ) {
                            vec3 q_chirho = abs(p_chirho) - b_chirho;
                            return length(max(q_chirho,0.0)) + min(max(q_chirho.x,max(q_chirho.y,q_chirho.z)),0.0);
                        }

                        // SDF for a Latin Cross shape (longer bottom stem)
                        float sdLatinCrossChirho(vec3 p_chirho, float height_chirho, float width_chirho, float arm_y_offset_chirho, float thickness_chirho) {
                            float half_thick_chirho = thickness_chirho * 0.5;
                            // Calculate vertical beam dimensions relative to its center
                            // Total height = height_chirho. Center is at 0. Top is height/2, bottom is -height/2.
                            vec3 box_v_dims_chirho = vec3(half_thick_chirho, height_chirho * 0.5, half_thick_chirho);

                            // Calculate horizontal beam dimensions relative to its center
                            vec3 box_h_dims_chirho = vec3(width_chirho * 0.5, half_thick_chirho, half_thick_chirho);
                            // Point relative to the horizontal beam's center (shifted up by arm_y_offset)
                            vec3 p_h_chirho = p_chirho - vec3(0.0, arm_y_offset_chirho, 0.0);

                            float d1_chirho = sdBoxChirho(p_chirho, box_v_dims_chirho);
                            float d2_chirho = sdBoxChirho(p_h_chirho, box_h_dims_chirho);
                            return min(d1_chirho, d2_chirho); // Sharp intersection
                        }


                        // --- Scene Definition ---
                        // Material IDs: 1.0=CenterSphere, 2.0=Crosses, 3.0+ = SmallSpheres (ID = 3.0 + index)
                        vec2 mapSceneChirho(vec3 p_chirho) {
                            // Central Sphere
                            float centerSphereDist_chirho = sdSphereChirho(p_chirho, 1.5);
                            vec2 res_chirho = vec2(centerSphereDist_chirho, 1.0);

                            // Orbiting Crosses
                            float angle_step_cross_chirho = 2.0 * PI_CHIRHO / float(NUM_CROSSES_CHIRHO);
                            float orbit_radius_cross_chirho = 4.5;
                            float cross_height_chirho = 1.0;
                            float cross_width_chirho = 0.7;
                            float cross_thickness_chirho = 0.15;
                            float cross_arm_y_chirho = (cross_height_chirho * 0.5) * 0.4; // Position arm relative to top part

                            for (int i_chirho = 0; i_chirho < NUM_CROSSES_CHIRHO; i_chirho++) {
                                float current_angle_chirho = float(i_chirho) * angle_step_cross_chirho + u_time_chirho * 0.4;
                                vec3 cross_pos_chirho = vec3(cos(current_angle_chirho) * orbit_radius_cross_chirho, sin(u_time_chirho * 0.6 + float(i_chirho)*1.5) * 1.5, sin(current_angle_chirho) * orbit_radius_cross_chirho);
                                vec3 p_local_chirho = p_chirho - cross_pos_chirho;
                                p_local_chirho = rotateYChirho(current_angle_chirho + PI_CHIRHO/2.0) * rotateZChirho(u_time_chirho * 0.3 + float(i_chirho)) * p_local_chirho; // Rotate cross

                                // No warping applied here
                                float crossDist_chirho = sdLatinCrossChirho(p_local_chirho, cross_height_chirho, cross_width_chirho, cross_arm_y_chirho, cross_thickness_chirho);

                                if (crossDist_chirho < res_chirho.x) {
                                    res_chirho = vec2(crossDist_chirho, 2.0);
                                }
                            }

                             // Orbiting Small Spheres
                            float angle_step_sphere_chirho = 2.0 * PI_CHIRHO / float(NUM_SMALL_SPHERES_CHIRHO);
                            float orbit_radius_sphere_base_chirho = 2.0;
                            float small_sphere_radius_chirho = 0.3;

                            for (int i_chirho = 0; i_chirho < NUM_SMALL_SPHERES_CHIRHO; i_chirho++) {
                                float orbit_radius_sphere_chirho = orbit_radius_sphere_base_chirho + float(i_chirho) * 0.2; // Increase radius with index

                                // Vary rotation direction and speed based on index
                                float time_offset_chirho = float(i_chirho) * 0.5;
                                float speed_multiplier_chirho = (mod(float(i_chirho), 2.0) == 0.0) ? -0.5 : 0.6; // Alternate direction
                                float current_angle_chirho = float(i_chirho) * angle_step_sphere_chirho + u_time_chirho * speed_multiplier_chirho + time_offset_chirho;

                                vec3 sphere_pos_chirho = vec3(cos(current_angle_chirho) * orbit_radius_sphere_chirho, cos(u_time_chirho * 0.7 + float(i_chirho)*2.0) * 1.0, sin(current_angle_chirho) * orbit_radius_sphere_chirho);
                                vec3 p_local_chirho = p_chirho - sphere_pos_chirho;
                                float sphereDist_chirho = sdSphereChirho(p_local_chirho, small_sphere_radius_chirho);

                                 if (sphereDist_chirho < res_chirho.x) {
                                    // Assign unique material ID range for small spheres
                                    res_chirho = vec2(sphereDist_chirho, 3.0 + float(i_chirho));
                                }
                            }

                            return res_chirho;
                        }

                        // --- Normal Calculation ---
                        vec3 calcNormalChirho(vec3 p_chirho) {
                            vec2 e_chirho = vec2(SURF_DIST_CHIRHO, 0.0);
                            return normalize(vec3(
                                mapSceneChirho(p_chirho + e_chirho.xyy).x - mapSceneChirho(p_chirho - e_chirho.xyy).x,
                                mapSceneChirho(p_chirho + e_chirho.yxy).x - mapSceneChirho(p_chirho - e_chirho.yxy).x,
                                mapSceneChirho(p_chirho + e_chirho.yyx).x - mapSceneChirho(p_chirho - e_chirho.yyx).x
                            ));
                        }

                         // --- Simple Sky Color Function ---
                        vec3 getSkyColorChirho(vec3 rd_chirho) {
                            float y_chirho = max(rd_chirho.y, 0.0);
                            vec3 bottomColor_chirho = vec3(0.1, 0.1, 0.2);
                            vec3 topColor_chirho = vec3(0.5, 0.7, 0.9);
                            return mix(bottomColor_chirho, topColor_chirho, pow(y_chirho, 0.5));
                        }

                         // --- Raymarching Core ---
                        vec2 rayMarchChirho(vec3 ro_chirho, vec3 rd_chirho, int max_reflections_chirho) {
                            float dO_chirho = 0.0;
                            vec2 res_chirho = vec2(-1.0, -1.0);

                            for(int i_chirho = 0; i_chirho < MAX_STEPS_CHIRHO; i_chirho++) {
                                if (max_reflections_chirho < 0) break;
                                vec3 p_chirho = ro_chirho + rd_chirho * dO_chirho;
                                res_chirho = mapSceneChirho(p_chirho);
                                float dS_chirho = res_chirho.x;
                                dO_chirho += dS_chirho;
                                if(dS_chirho < SURF_DIST_CHIRHO || dO_chirho > MAX_DIST_CHIRHO) break;
                            }
                            if (dO_chirho >= MAX_DIST_CHIRHO) dO_chirho = MAX_DIST_CHIRHO;
                            return vec2(dO_chirho, res_chirho.y);
                        }

                        // --- Main Shading Function ---
                        vec3 renderChirho(vec3 ro_chirho, vec3 rd_chirho) {
                             vec3 finalColor_chirho = vec3(0.0);
                             vec3 throughput_chirho = vec3(1.0);
                             int max_reflections_chirho = 2; // Max reflection bounces

                             for (int i_chirho = 0; i_chirho < max_reflections_chirho + 1; ++i_chirho) {
                                 vec2 rayResult_chirho = rayMarchChirho(ro_chirho, rd_chirho, max_reflections_chirho - i_chirho);
                                 float d_chirho = rayResult_chirho.x;
                                 float materialID_chirho = rayResult_chirho.y;

                                 if (d_chirho >= MAX_DIST_CHIRHO) {
                                     finalColor_chirho += throughput_chirho * getSkyColorChirho(rd_chirho);
                                     break;
                                 }

                                 vec3 p_chirho = ro_chirho + rd_chirho * d_chirho;
                                 vec3 n_chirho = calcNormalChirho(p_chirho);
                                 vec3 viewDir_chirho = -rd_chirho;

                                 vec3 lightPos_chirho = vec3(5.0 * sin(u_time_chirho * 0.2), 7.0, 8.0 * cos(u_time_chirho * 0.2));
                                 vec3 lightDir_chirho = normalize(lightPos_chirho - p_chirho);
                                 float diffuse_chirho = max(dot(n_chirho, lightDir_chirho), 0.0);
                                 float ambient_chirho = 0.15;

                                 vec3 baseColor_chirho = vec3(0.8);
                                 float reflectivity_chirho = 0.0;
                                 float metallic_chirho = 0.0;

                                 if (materialID_chirho == 1.0) { // Center Sphere
                                    baseColor_chirho = vec3(0.95);
                                    reflectivity_chirho = 0.8;
                                    metallic_chirho = 0.9;
                                 } else if (materialID_chirho == 2.0) { // Crosses
                                    baseColor_chirho = vec3(0.9, 0.7, 0.2);
                                    reflectivity_chirho = 0.3;
                                    metallic_chirho = 0.8;
                                 } else if (materialID_chirho >= 3.0) { // Small Spheres
                                     float sphereIndex_chirho = materialID_chirho - 3.0;
                                     float hue_chirho = mod(sphereIndex_chirho / float(NUM_SMALL_SPHERES_CHIRHO) + u_time_chirho * 0.05, 1.0);
                                     vec3 K_chirho = vec3(1.0, 2.0 / 3.0, 1.0 / 3.0);
                                     vec3 p_col_chirho = abs(fract(hue_chirho + K_chirho) * 6.0 - 3.0);
                                     baseColor_chirho = mix(K_chirho.xxx, clamp(p_col_chirho - 1.0, 0.0, 1.0), 0.8);

                                     reflectivity_chirho = 0.6;
                                     metallic_chirho = 0.1;
                                 }

                                 float fresnel_chirho = pow(1.0 - max(dot(viewDir_chirho, n_chirho), 0.0), 3.0) * 0.8 + 0.2;
                                 float effectiveReflectivity_chirho = mix(reflectivity_chirho, 1.0, metallic_chirho * fresnel_chirho);

                                 vec3 directLight_chirho = baseColor_chirho * (diffuse_chirho * (1.0 - metallic_chirho) + ambient_chirho);
                                 finalColor_chirho += throughput_chirho * directLight_chirho * (1.0 - effectiveReflectivity_chirho);

                                 throughput_chirho *= mix(baseColor_chirho, vec3(1.0), metallic_chirho) * effectiveReflectivity_chirho;
                                 rd_chirho = reflect(rd_chirho, n_chirho);
                                 ro_chirho = p_chirho + n_chirho * SURF_DIST_CHIRHO * 2.0;

                                 if (max(throughput_chirho.r, max(throughput_chirho.g, throughput_chirho.b)) < 0.01) break;
                             }

                            return finalColor_chirho;
                        }


                        void main() {
                            vec2 uv_chirho = (gl_FragCoord.xy * 2.0 - u_resolution_chirho.xy) / u_resolution_chirho.y;
                            vec3 ro_chirho = vec3(0.0, 0.0, 10.0);
                            vec3 rd_chirho = normalize(vec3(uv_chirho, -1.5));
                            vec3 finalColor_chirho = renderChirho(ro_chirho, rd_chirho);
                            fragColor_chirho = vec4(finalColor_chirho, 1.0);
                        }
                `;

            /** Helper function to create and compile a shader. */
            function createShader_chirho(gl, type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                const success = gl.getShaderParameter(
                    shader,
                    gl.COMPILE_STATUS,
                );
                if (success) return shader;
                console.error(
                    `Error compiling shader (${type === gl.VERTEX_SHADER ? "Vertex" : "Fragment"}):`,
                    gl.getShaderInfoLog(shader),
                );
                gl.deleteShader(shader);
                return null;
            }

            /** Helper function to create and link a shader program. */
            function createProgram_chirho(gl, vertexShader, fragmentShader) {
                const program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                const success = gl.getProgramParameter(program, gl.LINK_STATUS);
                if (success) return program;
                console.error(
                    "Error linking program:",
                    gl.getProgramInfoLog(program),
                );
                gl.deleteProgram(program);
                return null;
            }

            /**
             * Initializes the primary effect using Raw WebGL2 (Raymarching Scene).
             * @param {HTMLCanvasElement} canvasChirho - The canvas element.
             * @param {WebGL2RenderingContext} gl - The WebGL2 context.
             * @returns {boolean} True if initialization was successful, false otherwise.
             */
            function initRawWebGL2Effect_chirho(canvasChirho, gl) {
                console.log(
                    "Attempting to initialize Raw WebGL2 Raymarch Effect...",
                );
                try {
                    // --- Compile Shaders ---
                    const vertexShader = createShader_chirho(
                        gl,
                        gl.VERTEX_SHADER,
                        rawVertexShaderSource_chirho,
                    );
                    const fragmentShader = createShader_chirho(
                        gl,
                        gl.FRAGMENT_SHADER,
                        rawFragmentShaderSource_chirho,
                    );
                    if (!vertexShader || !fragmentShader) return false;

                    // --- Link Program ---
                    const program = createProgram_chirho(
                        gl,
                        vertexShader,
                        fragmentShader,
                    );
                    if (!program) return false;

                    // --- Use Program BEFORE getting locations ---
                    gl.useProgram(program);

                    // --- Get Attribute & Uniform Locations ---
                    const positionAttributeLocation = gl.getAttribLocation(
                        program,
                        "a_position",
                    );
                    const resolutionUniformLocation = gl.getUniformLocation(
                        program,
                        "u_resolution_chirho",
                    );
                    const timeUniformLocation = gl.getUniformLocation(
                        program,
                        "u_time_chirho",
                    );
                    // const mouseUniformLocation = gl.getUniformLocation(program, "u_mouse");

                    if (positionAttributeLocation < 0) {
                        console.error(
                            "Failed to get attribute location for a_position",
                        );
                        return false;
                    }

                    // --- Create Buffer for Quad Vertices ---
                    const positions = [
                        -1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1,
                    ];
                    const positionBuffer = gl.createBuffer();

                    // --- Vertex Array Object (VAO) Setup ---
                    const vao = gl.createVertexArray();
                    gl.bindVertexArray(vao);
                    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                    gl.bufferData(
                        gl.ARRAY_BUFFER,
                        new Float32Array(positions),
                        gl.STATIC_DRAW,
                    );
                    gl.enableVertexAttribArray(positionAttributeLocation);
                    const size = 2;
                    const type = gl.FLOAT;
                    const normalize = false;
                    const stride = 0;
                    const offset = 0;
                    gl.vertexAttribPointer(
                        positionAttributeLocation,
                        size,
                        type,
                        normalize,
                        stride,
                        offset,
                    );
                    gl.bindVertexArray(null); // Unbind VAO

                    // --- Resize Handling ---
                    function resizeCanvasToDisplaySize(canvas) {
                        const displayWidth = canvas.clientWidth;
                        const displayHeight = canvas.clientHeight;
                        if (
                            canvas.width !== displayWidth ||
                            canvas.height !== displayHeight
                        ) {
                            canvas.width = displayWidth;
                            canvas.height = displayHeight;
                            return true;
                        }
                        return false;
                    }

                    // --- Render Loop ---
                    let startTime = performance.now();
                    function renderLoop(currentTime) {
                        const time = (currentTime - startTime) * 0.001; // Time in seconds

                        resizeCanvasToDisplaySize(gl.canvas);
                        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
                        gl.clearColor(0, 0, 0, 0);
                        gl.clear(gl.COLOR_BUFFER_BIT);

                        gl.useProgram(program);
                        gl.bindVertexArray(vao);

                        // Update uniforms
                        gl.uniform2f(
                            resolutionUniformLocation,
                            gl.canvas.width,
                            gl.canvas.height,
                        );
                        gl.uniform1f(timeUniformLocation, time);
                        // gl.uniform2f(mouseUniformLocation, mouseX_norm, mouseY_norm);

                        const primitiveType = gl.TRIANGLES;
                        const drawOffset = 0;
                        const count = 6;
                        gl.drawArrays(primitiveType, drawOffset, count);

                        requestAnimationFrame(renderLoop);
                    }
                    requestAnimationFrame(renderLoop); // Start the loop

                    console.log("Raw WebGL2 Raymarch Effect Initialized.");
                    return true; // Indicate success
                } catch (error) {
                    console.error(
                        "Error initializing Raw WebGL2 effect:",
                        error,
                    );
                    return false; // Indicate failure
                }
            }

            /**
             * Initializes the WebGL1 fallback effect (particles + wireframe box cross) using Three.js.
             * @param {HTMLCanvasElement} canvasChirho - The canvas element.
             * @param {WebGLRenderingContext} gl - The WebGL1 context.
             * @returns {boolean} True if initialization was successful, false otherwise.
             */
            function initCrossEffect_chirho(canvasChirho, gl) {
                console.log("Attempting to initialize WebGL1 Cross Effect...");
                if (typeof THREE === "undefined") {
                    console.error("Three.js library not loaded.");
                    return false;
                }
                try {
                    // --- Three.js Setup ---
                    const sceneChirho = new THREE.Scene();
                    const cameraChirho = new THREE.PerspectiveCamera(
                        75,
                        window.innerWidth / window.innerHeight,
                        0.1,
                        1000,
                    );
                    cameraChirho.position.z = 50;
                    const rendererChirho = new THREE.WebGLRenderer({
                        canvas: canvasChirho,
                        context: gl,
                        alpha: true,
                    });
                    rendererChirho.setSize(
                        window.innerWidth,
                        window.innerHeight,
                    );
                    rendererChirho.setPixelRatio(
                        Math.min(window.devicePixelRatio, 2),
                    );

                    // --- Lighting ---
                    const ambientLightChirho = new THREE.AmbientLight(
                        0xffffff,
                        0.6,
                    );
                    sceneChirho.add(ambientLightChirho);
                    const directionalLightChirho = new THREE.DirectionalLight(
                        0xffffff,
                        0.8,
                    );
                    directionalLightChirho.position.set(5, 10, 7.5);
                    sceneChirho.add(directionalLightChirho);

                    // --- Particles ---
                    const particlesGeometryChirho = new THREE.BufferGeometry();
                    const particlesCntChirho = 5000;
                    const posArrayChirho = new Float32Array(
                        particlesCntChirho * 3,
                    );
                    for (
                        let i_chirho = 0;
                        i_chirho < particlesCntChirho * 3;
                        i_chirho++
                    ) {
                        posArrayChirho[i_chirho] = (Math.random() - 0.5) * 200;
                    }
                    particlesGeometryChirho.setAttribute(
                        "position",
                        new THREE.BufferAttribute(posArrayChirho, 3),
                    );
                    const particlesMaterialChirho = new THREE.PointsMaterial({
                        size: 0.085,
                        color: 0xaaaaaa,
                        blending: THREE.AdditiveBlending,
                        transparent: true,
                        opacity: 0.7,
                    });
                    const particleMeshChirho = new THREE.Points(
                        particlesGeometryChirho,
                        particlesMaterialChirho,
                    );
                    sceneChirho.add(particleMeshChirho);

                    // --- Box Wireframe Cross ---
                    const mainCrossGroupChirho = new THREE.Group();
                    const edgeThickness_chirho = 0.3;
                    const verticalHeight_chirho = 25;
                    const verticalWidth_chirho = 2;
                    const horizontalWidth_chirho = 16;
                    const horizontalHeight_chirho = 2;
                    const crossDepth_chirho = 1.5;
                    const horizontalYOffset_chirho = 5;
                    const edgeMaterialChirho = new THREE.MeshStandardMaterial({
                        color: 0x00aaff,
                        roughness: 0.5,
                        metalness: 0.1,
                    });
                    function createBoxOutlineChirho(
                        width,
                        height,
                        depth,
                        thickness,
                    ) {
                        /* ... box outline function ... */
                        const group = new THREE.Group();
                        const w = width / 2;
                        const h = height / 2;
                        const d = depth / 2;
                        const createEdge = (
                            w_geom,
                            h_geom,
                            d_geom,
                            x_pos,
                            y_pos,
                            z_pos,
                        ) => {
                            const geometry = new THREE.BoxGeometry(
                                w_geom,
                                h_geom,
                                d_geom,
                            );
                            const mesh = new THREE.Mesh(
                                geometry,
                                edgeMaterialChirho,
                            );
                            mesh.position.set(x_pos, y_pos, z_pos);
                            group.add(mesh);
                        };
                        createEdge(thickness, height, thickness, -w, 0, d);
                        createEdge(thickness, height, thickness, w, 0, d);
                        createEdge(thickness, height, thickness, -w, 0, -d);
                        createEdge(thickness, height, thickness, w, 0, -d);
                        createEdge(width, thickness, thickness, 0, h, d);
                        createEdge(width, thickness, thickness, 0, -h, d);
                        createEdge(width, thickness, thickness, 0, h, -d);
                        createEdge(width, thickness, thickness, 0, -h, -d);
                        createEdge(thickness, thickness, depth, -w, h, 0);
                        createEdge(thickness, thickness, depth, w, h, 0);
                        createEdge(thickness, thickness, depth, -w, -h, 0);
                        createEdge(thickness, thickness, depth, w, -h, 0);
                        return group;
                    }
                    const verticalOutlineGroupChirho = createBoxOutlineChirho(
                        verticalWidth_chirho,
                        verticalHeight_chirho,
                        crossDepth_chirho,
                        edgeThickness_chirho,
                    );
                    const horizontalOutlineGroupChirho = createBoxOutlineChirho(
                        horizontalWidth_chirho,
                        horizontalHeight_chirho,
                        crossDepth_chirho,
                        edgeThickness_chirho,
                    );
                    horizontalOutlineGroupChirho.position.y =
                        horizontalYOffset_chirho;
                    mainCrossGroupChirho.add(verticalOutlineGroupChirho);
                    mainCrossGroupChirho.add(horizontalOutlineGroupChirho);
                    mainCrossGroupChirho.position.set(0, 0, 10);
                    sceneChirho.add(mainCrossGroupChirho);

                    // --- Event Listeners & Animation Loop ---
                    window.addEventListener("resize", () => {
                        /* ... resize handler ... */
                        cameraChirho.aspect =
                            window.innerWidth / window.innerHeight;
                        cameraChirho.updateProjectionMatrix();
                        rendererChirho.setSize(
                            window.innerWidth,
                            window.innerHeight,
                        );
                        rendererChirho.setPixelRatio(
                            Math.min(window.devicePixelRatio, 2),
                        );
                    });
                    let mouseXChirho = 0;
                    let mouseYChirho = 0;
                    document.addEventListener("mousemove", (eventChirho) => {
                        /* ... mouse handler ... */
                        mouseXChirho =
                            (eventChirho.clientX / window.innerWidth) * 2 - 1;
                        mouseYChirho =
                            -(eventChirho.clientY / window.innerHeight) * 2 + 1;
                    });
                    const clockChirho = new THREE.Clock();
                    const animateChirho = () => {
                        /* ... animation loop ... */
                        const elapsedTimeChirho = clockChirho.getElapsedTime();
                        particleMeshChirho.rotation.y =
                            elapsedTimeChirho * 0.05;
                        particleMeshChirho.rotation.x =
                            elapsedTimeChirho * 0.02;
                        mainCrossGroupChirho.rotation.x =
                            elapsedTimeChirho * 0.2;
                        mainCrossGroupChirho.rotation.y =
                            elapsedTimeChirho * 0.3;
                        mainCrossGroupChirho.rotation.z =
                            elapsedTimeChirho * 0.1;
                        cameraChirho.position.x +=
                            (mouseXChirho * 5 - cameraChirho.position.x) * 0.02;
                        cameraChirho.position.y +=
                            (-mouseYChirho * 5 - cameraChirho.position.y) *
                            0.02;
                        cameraChirho.lookAt(sceneChirho.position);
                        rendererChirho.render(sceneChirho, cameraChirho);
                        window.requestAnimationFrame(animateChirho);
                    };
                    animateChirho();
                    console.log("WebGL1 Cross Effect Initialized.");
                    return true; // Indicate success
                } catch (error) {
                    console.error(
                        "Error initializing WebGL1 Cross effect:",
                        error,
                    );
                    return false; // Indicate failure
                }
            }

            /**
             * Initializes the static fallback effect (shows a static background).
             */
            function initStaticFallback_chirho() {
                console.log("Using static fallback.");
                const canvasElement =
                    document.getElementById("bg-canvas_chirho");
                const fallbackElement = document.getElementById(
                    "hero-fallback-bg_chirho",
                );
                if (canvasElement) {
                    canvasElement.style.display = "none";
                }
                if (fallbackElement) {
                    fallbackElement.style.display = "block";
                }
            }

            // --- Main Execution ---
            document.addEventListener("DOMContentLoaded", () => {
                const canvasElement =
                    document.getElementById("bg-canvas_chirho");
                if (!canvasElement) {
                    console.error(
                        "Canvas element #bg-canvas_chirho not found. Cannot initialize WebGL.",
                    );
                    initStaticFallback_chirho();
                    return;
                }

                // Try WebGL2 first
                const webgl2Context = canvasElement.getContext("webgl2");
                if (webgl2Context) {
                    const success = initRawWebGL2Effect_chirho(
                        canvasElement,
                        webgl2Context,
                    ); // Try Raymarching
                    if (!success) {
                        // If Raw WebGL2 failed, try WebGL1 Cross effect
                        console.log(
                            "Raw WebGL2 effect failed, attempting WebGL1 fallback...",
                        );
                        const webgl1Context =
                            canvasElement.getContext("webgl") ||
                            canvasElement.getContext("experimental-webgl");
                        if (webgl1Context) {
                            const successFallback1 = initCrossEffect_chirho(
                                canvasElement,
                                webgl1Context,
                            ); // Use Cross effect
                            if (!successFallback1) initStaticFallback_chirho();
                        } else {
                            initStaticFallback_chirho();
                        }
                    }
                } else {
                    // WebGL2 not available, try WebGL1 Cross effect
                    console.log(
                        "WebGL2 not available, attempting WebGL1 fallback...",
                    );
                    const webgl1Context =
                        canvasElement.getContext("webgl") ||
                        canvasElement.getContext("experimental-webgl");
                    if (webgl1Context) {
                        console.log("WebGL1 context created");
                        const successFallback1 = initCrossEffect_chirho(
                            canvasElement,
                            webgl1Context,
                        ); // Use Cross effect
                        if (!successFallback1) initStaticFallback_chirho();
                    } else {
                        // No WebGL support
                        console.log("WebGL1 context not created");
                        initStaticFallback_chirho();
                    }
                }
            });
        </script>
    </body>
</html>
